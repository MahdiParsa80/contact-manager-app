import{r as h,j as e}from"./react-Csju-tCy.js";import{c as T}from"./react-dom-tI8hEBBH.js";import{y as k,L as G}from"./react-toastify-VfaSECKs.js";import{i as f}from"./use-immer-DcWhw5ux.js";import{_ as Y}from"./lodash-DsB0vwPP.js";import{l as H}from"./react-confirm-alert-CW9cPGwq.js";import{a as K}from"./@supabase-DRr4c2gw.js";import{u as W,N as I,L as E,a as q,b as R,R as Q,c as w,d as ee,B as te}from"./react-router-Cu4hhi-k.js";import{F as A,a as D,b as d,E as x}from"./formik-BJS-YAqE.js";import{c as se,a as ae,b as y}from"./yup-CNiHe43H.js";import"./scheduler-SPyfQU6S.js";import"./clsx-B-dksMZM.js";import"./immer-3Uh6AxIC.js";import"./prop-types-Chjiymov.js";import"./cookie--_YQFYBD.js";import"./deepmerge-DhIoniG1.js";import"./lodash-es-ClCkCI8n.js";import"./react-fast-compare-CL69EoOq.js";import"./hoist-non-react-statics-BBefcDpA.js";import"./react-is-CnyDuYXe.js";import"./property-expr-DwgEMw67.js";import"./tiny-case-Gl8mQWqo.js";import"./toposort-DDu1Qe-F.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const c of document.querySelectorAll('link[rel="modulepreload"]'))r(c);new MutationObserver(c=>{for(const t of c)if(t.type==="childList")for(const u of t.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&r(u)}).observe(document,{childList:!0,subtree:!0});function o(c){const t={};return c.integrity&&(t.integrity=c.integrity),c.referrerPolicy&&(t.referrerPolicy=c.referrerPolicy),c.crossOrigin==="use-credentials"?t.credentials="include":c.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(c){if(c.ep)return;c.ep=!0;const t=o(c);fetch(c.href,t)}})();const re="#222831",P="#393E46",$="#00ADB5",F="#EEEEEE",B="#140e8d",ce="#00af03",g=h.createContext({loading:!1,changeFlag:!1,setContact:{},contact:[],contacts:[],filteredContacts:{},group:{},setLoading:()=>{},deleteContact:()=>{},updateContact:()=>{},createContact:()=>{},contactSearch:()=>{},changed:()=>{}}),oe="https://plyqerltqrunmsgnyzfd.supabase.co",le="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InBseXFlcmx0cXJ1bm1zZ255emZkIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDk0ODkxMDgsImV4cCI6MjA2NTA2NTEwOH0.p81IXfb2ckatbdOhxf4WmxhKwrP27COYpeSOaxdq_ZU",b=K(oe,le),ne=async()=>{const{data:a,error:s}=await b.from("contacts").select("*");if(s)throw s;return a},ie=async a=>{const{data:s,error:o}=await b.from("contacts").select("*").eq("id",a).single();if(o)throw o;return s},M=async()=>{const{data:a,error:s}=await b.from("groups").select("*");if(s)throw console.error("Error fetching groups:",s),s;return a},de=async a=>{const{status:s,error:o}=await b.from("contacts").insert(a);if(o)throw o;return s},me=async(a,s)=>{console.log("Updating contact with ID:",a,"Data:",s);const{data:o,error:r,status:c}=await b.from("contacts").update(s).eq("id",a);if(r)throw console.error("Error updating contact:",r.message),r;return console.log("Update successful, status:",c),{data:o,status:c}},xe=async a=>{const{data:s,error:o}=await b.from("contacts").delete().eq("id",a);if(o)throw o;return s},he=()=>{const a=W(),{contactSearch:s}=h.useContext(g);return e.jsxs("div",{className:` mx-2 w-5 md:w-75 hidden md:block${a.pathname==="/contacts"||"!hidden"}`,dir:"ltr",children:[e.jsx("span",{className:"rounded-l-xl p-2",id:"basic-addon1",style:{backgroundColor:$},children:e.jsx("i",{className:"fa fa-search"})}),e.jsx("input",{onChange:o=>s(o.target.value),dir:"rtl",placeholder:"Ø¬Ø³ØªØ¬ÙˆÛŒ Ù…Ø®Ø§Ø·Ø¨","aria-label":"search","aria-describedby":"basic-addon1",type:"text",className:"bg-white rounded-r-xl p-2 border-white border-1"})]})},ue=()=>e.jsx("nav",{className:" shadow-lg h-20 sticky top-0 bg-[#222831c4]  backdrop-filter backdrop-blur-2xl",children:e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsxs("div",{className:"flex md:w-2/3 justify-around",children:[e.jsxs("div",{className:"col ",style:{color:F},children:[e.jsx("i",{className:"fa fa-id-badge text-sm",style:{color:F,margin:"5px"}}),"ÙˆØ¨ Ø§Ù¾Ù„ÛŒÚ©ÛŒØ´Ù† Ù…Ø¯ÛŒØ±ÛŒØª Ù…Ø®Ø§Ø·Ø¨ÛŒÙ†"]}),e.jsx("div",{children:e.jsx(he,{})})]})})}),pe=({contact:a,confirmDelete:s})=>{const o="text-sm md:p-3 text-white border-white p-2",r="w-10 h-10 rounded-xl m-1";return e.jsx("div",{className:"w-[100%] md:w-[50%]",children:e.jsx("div",{style:{backgroundColor:P},className:"m-2 px-1 rounded-2xl",children:e.jsx("div",{className:"p-3",children:e.jsxs("div",{className:"items-center flex flex-wrap justify-around",children:[e.jsx("div",{className:"m-1",children:e.jsx("img",{src:a.photo,alt:"aks",className:"rounded-full w-20 h-20 md:w-40 md:h-40 object-cover"})}),e.jsx("div",{className:"flex items-center w-[100%] md:w-[60%] m-2",children:e.jsxs("ul",{className:"rounded-3xl bg-[#778192] w-[100%] ",children:[e.jsxs("li",{className:o,children:["Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ :"," ",e.jsx("span",{className:"fw-bold",children:a.fullName})]}),e.jsxs("li",{className:`${o} border-y`,children:["Ø±Ø§ÛŒØ§Ù†Ø§Ù…Ù‡:"," ",e.jsx("span",{className:"fw-bold",children:a.email})]}),e.jsxs("li",{className:o,children:["ØªÙ„ÙÙ†:"," ",e.jsx("span",{className:"fw-bold",children:a.mobile})]})]})}),e.jsxs("div",{className:"flex md:flex-col items-center",children:[e.jsx(I,{to:`/editcontact/${a.id}`,children:e.jsx("button",{className:r,style:{backgroundColor:B},children:e.jsx("i",{className:"fa fa-pencil  text-white"})})}),e.jsx(I,{to:`/ViewContact/${a.id}`,children:e.jsx("button",{className:r,style:{backgroundColor:ce},children:e.jsx("i",{className:"fa fa-eye text-white"})})},a.id),e.jsx("button",{className:`${r} bg-red-600`,onClick:s,children:e.jsx("i",{className:"fa fa-trash text-white p-1"})})]})]})})})})},je="/assets/404_error-ClbhMAb4.gif",fe="/assets/tri-spinner-BHVs_Sv6.gif",U=()=>e.jsx(e.Fragment,{children:e.jsx("img",{src:fe,alt:"loading",className:"d-block m-auto w-[200px]",style:{Width:"200px"}})}),Ne=()=>{const{filteredContacts:a,loading:s,confirmDelete:o}=h.useContext(g);return e.jsxs(e.Fragment,{children:[e.jsx("h3",{className:"fixed bottom-15 right-2  md:bottom-20 md:right-20",children:e.jsx(E,{to:"/AddContact",children:e.jsxs("button",{className:"w-10 h-10 md:w-auto md:h-auto md:mx-2 p-1 md:p-2 rounded-full md:rounded-2xl ",style:{backgroundColor:$,color:P},children:[e.jsxs("span",{className:"h3 hidden md:block",children:["Ø³Ø§Ø®Øª Ù…Ø®Ø§Ø·Ø¨ Ø¬Ø¯ÛŒØ¯",e.jsx("i",{className:"fa fa-plus-circle mx-2"})]}),e.jsx("i",{className:"fa fa-plus-circle md:!hidden"})]})})}),s?e.jsx(U,{}):e.jsx("section",{className:"w-[98vw] flex justify-center",children:e.jsx("section",{className:"flex justify-center w-3/4",children:e.jsx("div",{className:"flex flex-wrap",children:a.length>0?a.map(r=>e.jsx(pe,{contact:r,confirmDelete:()=>o(r.id,r.fullName)},r.id)):e.jsx("div",{className:"flex justify-center h-[75vh] items-center",children:e.jsxs("div",{className:"flex flex-col items-center rounded-4xl justify-center py-5",style:{backgroundColor:B},children:[e.jsx("h3",{className:"text-5xl m-5 text-orange-500",children:"Ù…Ø®Ø§Ø·Ø¨ ÛŒØ§ÙØª Ù†Ø´Ø¯..."}),e.jsx("img",{src:je,alt:"not found",className:"w-75 rounded-full"})]})})})})})]})},ge="/assets/add_contact-C3fL7M1j.png",J=se().shape({fullName:y().required("fullname is required"),photo:y().url().required("photo is required"),job:y().required("job is required"),group:y().required("group is required"),email:y().email("email is not valid").required("email is required"),mobile:ae().positive().required("phone number is required")}),be=()=>{const{Contact:a,groups:s,createContactForm:o}=h.useContext(g),r="bg-gray-800 border-gray-400 border-2 text-gray-300 block rounded !my-3 py-1 px-2 w-100",c={fullName:"",photo:"",mobile:"",email:"",job:"",group:""};return e.jsx("div",{className:"flex justify-center h-200 items-center",children:e.jsxs("div",{className:"flex w-3/4 flex-col",children:[e.jsx("h1",{className:"text-white text-center text-4xl",children:"Ø³Ø§Ø®Øª Ù…Ø®Ø§Ø·Ø¨ Ø¬Ø¯ÛŒØ¯"}),e.jsxs("div",{className:"flex flex-row justify-around",children:[e.jsx("div",{className:"w-50 flex items-center m-2",children:e.jsx(A,{initialValues:c,validationSchema:J,onSubmit:t=>o(t),children:()=>e.jsxs(D,{children:[e.jsx(d,{className:r,type:"text",name:"fullName",placeholder:"Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ"}),e.jsx(x,{name:"fullName",render:t=>e.jsx("p",{className:"text-red-700",children:t})}),e.jsx(d,{className:r,type:"url",name:"photo",placeholder:"Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³"}),e.jsx(x,{name:"photo",render:t=>e.jsx("p",{className:"text-red-700",children:t})}),e.jsx(d,{className:r,type:"tel",name:"mobile",placeholder:"Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†"}),e.jsx(x,{name:"mobile",render:t=>e.jsx("p",{className:"text-red-700",children:t})}),e.jsx(d,{className:r,type:"email",name:"email",placeholder:"Ø±Ø§ÛŒØ§Ù†Ø§Ù…Ù‡"}),e.jsx(x,{name:"email",render:t=>e.jsx("p",{className:"text-red-700",children:t})}),e.jsx(d,{className:r,type:"text",name:"job",placeholder:"Ø´ØºÙ„"}),e.jsx(x,{name:"job",render:t=>e.jsx("p",{className:"text-red-700",children:t})}),e.jsxs(d,{className:`${r} !backdrop-blur-3xl`,as:"select",type:"group",name:"group",placeholder:"",children:[e.jsx("option",{className:"!backdrop-blur-3xl",value:"",children:"Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø±ÙˆÙ‡"}),s.length>0&&s.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsx("button",{className:"text-white p-1.5 m-2 !rounded bg-[#4db487] w-46",type:"submit",children:" Ø³Ø§Ø®Øª Ù…Ø®Ø§Ø·Ø¨"}),e.jsx(E,{to:"/contacts",children:e.jsx("button",{className:"text-white p-1.5 m-2 !rounded bg-red-500 w-46",children:" Ø§Ù†ØµØ±Ø§Ù"})})]})})}),e.jsx("div",{className:"w-[50%]",children:e.jsx("img",{src:ge,alt:"add contact",className:"rounded-2xl"})})]})]})})},we=()=>{const a="bg-gray-800 border-gray-400 border-2 text-gray-300 block rounded !my-3 py-1 px-2 w-100",{changed:s}=h.useContext(g),{contactid:o}=q(),r=R(),[c,t]=f({isLoading:!1,contact:{fullName:"",photo:"",mobile:"",email:"",job:"",group:""},groups:[]});h.useEffect(()=>{(async()=>{try{t(N=>{N.isLoading=!0});const m=await ie(o),j=await M();t(N=>{N.contact=m,N.groups=j,N.isLoading=!1})}catch(m){console.error("Error fetching data:",m.message)}})()},[]);const u=async l=>{try{t(j=>{j.isLoading=!0});const{status:m}=await me(o,l);if(m===200||m===204)k.info("Ù…Ø®Ø§Ø·Ø¨ Ø¨Ù‡ Ø±ÙˆØ²Ø±Ø³Ø§Ù†ÛŒ Ø´Ø¯",{icon:"ðŸ”"}),s(),r("/contacts");else throw new Error(`Unexpected status code: ${m}`)}catch(m){console.error("Error updating contact:",m.message),t(j=>{j.isLoading=!1})}},{isLoading:p,contact:C,groups:v}=c;return e.jsx(e.Fragment,{children:p?e.jsx(U,{}):e.jsx("div",{className:"flex justify-center h-200 items-center",children:e.jsxs("div",{className:"flex w-2/3 flex-col",children:[e.jsx("h1",{className:"text-white text-center text-3xl",children:"ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø®Ø§Ø·Ø¨ "}),e.jsxs("div",{className:"flex flex-row justify-around",children:[e.jsx("div",{className:"w-50 flex items-center",children:e.jsx(A,{initialValues:C,enableReinitialize:!0,validationSchema:J,onSubmit:l=>u(l),children:()=>e.jsxs(D,{children:[e.jsx(d,{className:a,type:"text",name:"fullName",placeholder:"Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ"}),e.jsx(x,{name:"fullName",render:l=>e.jsx("p",{className:"text-red-700",children:l})}),e.jsx(d,{className:a,type:"url",name:"photo",placeholder:"Ù„ÛŒÙ†Ú© Ø¹Ú©Ø³"}),e.jsx(x,{name:"photo",render:l=>e.jsx("p",{className:"text-red-700",children:l})}),e.jsx(d,{className:a,type:"tel",name:"mobile",placeholder:"Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†"}),e.jsx(x,{name:"mobile",render:l=>e.jsx("p",{className:"text-red-700",children:l})}),e.jsx(d,{className:a,type:"email",name:"email",placeholder:"Ø±Ø§ÛŒØ§Ù†Ø§Ù…Ù‡"}),e.jsx(x,{name:"email",render:l=>e.jsx("p",{className:"text-red-700",children:l})}),e.jsx(d,{className:a,type:"text",name:"job",placeholder:"Ø´ØºÙ„"}),e.jsx(x,{name:"job",render:l=>e.jsx("p",{className:"text-red-700",children:l})}),e.jsxs(d,{className:`${a} !backdrop-blur-3xl`,as:"select",type:"group",placeholder:"",children:[e.jsx("option",{className:"!backdrop-blur-3xl",value:"",children:"Ø§Ù†ØªØ®Ø§Ø¨ Ú¯Ø±ÙˆÙ‡"}),v.length>0&&v.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]}),e.jsx("button",{className:"text-white p-1.5 m-2 !rounded bg-[#4db487] w-46",type:"submit",children:" ÙˆÛŒØ±Ø§ÛŒØ´ Ù…Ø®Ø§Ø·Ø¨"}),e.jsx(E,{to:"/contacts",children:e.jsx("button",{className:"text-white p-1.5 m-2 !rounded bg-red-500 w-46",children:" Ø§Ù†ØµØ±Ø§Ù"})})]})})}),e.jsx("div",{className:"flex flex-row-reverse w-[50%]",children:e.jsx("img",{src:C.photo,alt:"add contact",className:"rounded-full w-95 h-95 object-cover"})})]})]})})})},ye=()=>{const{contacts:a,groups:s}=h.useContext(g),{contactid:o}=q(),r="px-3 py-2 text-white text-xl !border-b-2 text-left",c="px-3 py-2 text-white text-xl !border-b-2",t=a.filter(p=>p.id==o),u=s.filter(p=>p.id==t[0].group);return e.jsxs("div",{className:"flex justify-center h-[80%] flex-col items-center",children:[e.jsx("h2",{className:"text-white text-center",children:" Ù…Ø´Ø§Ù‡Ø¯Ù‡ Ù…Ø®Ø§Ø·Ø¨"}),e.jsxs("div",{className:"w-2/3 flex justify-around items-center",children:[e.jsx("div",{className:"text-white ",children:e.jsx("table",{className:" bg-[#2c2e47] w-4xs",children:e.jsxs("tbody",{children:[e.jsxs("tr",{children:[e.jsx("td",{className:r,children:"Ù†Ø§Ù… Ùˆ Ù†Ø§Ù… Ø®Ø§Ù†ÙˆØ§Ø¯Ú¯ÛŒ:"}),e.jsx("td",{className:c,children:t[0].fullName})]}),e.jsxs("tr",{children:[e.jsx("td",{className:r,children:"Ø´Ù…Ø§Ø±Ù‡ ØªÙ„ÙÙ†:"}),e.jsx("td",{className:c,children:t[0].mobile})]}),e.jsxs("tr",{children:[e.jsx("td",{className:r,children:"Ø§ÛŒÙ…ÛŒÙ„:"}),e.jsx("td",{className:c,children:t[0].email})]}),e.jsxs("tr",{children:[e.jsx("td",{className:r,children:"Ø´ØºÙ„:"}),e.jsx("td",{className:c,children:t[0].job})]}),e.jsxs("tr",{children:[e.jsx("td",{className:r,children:"Ú¯Ø±ÙˆÙ‡:"}),e.jsx("td",{className:c,children:u[0].name})]})]})})}),e.jsx("div",{className:"",children:e.jsx("img",{className:"rounded-full w-95 h-95 object-cover",src:t[0].photo,alt:"profile photo"})})]}),e.jsx(E,{to:"/contacts",children:e.jsx("button",{className:"p-2 !rounded-lg bg-teal-500 text-white !mt-25",children:"Ø¨Ø§Ø²Ú¯Ø´Øª Ø¨Ù‡ ØµÙØ­Ù‡ Ø§ØµÙ„ÛŒ"})})]})},Ce=()=>{const[a,s]=f(!1),[o,r]=f([]),[c,t]=f([]),[u,p]=f([]),[C,v]=f({}),[l,m]=f([]),[j,N]=f(!1),V=R(),O=()=>{N(!j)},_=Y.debounce(n=>{n.trim()===""?p(c):p(c.filter(i=>i.fullName.toLowerCase().includes(n.toLowerCase())))},1500),z=async n=>{try{await de(n)==201&&(v({}),m([]),O(),V("/contacts"),k.success("Ù…Ø®Ø§Ø·Ø¨ Ø§Ø¶Ø§ÙÙ‡ Ø´Ø¯",{icon:"âœ…"}))}catch(i){console.error(i.message)}},X=(n,i)=>{H.confirmAlert({customUI:({onClose:L})=>e.jsxs("div",{style:{backgroundColor:re},className:"border-2 rounded-2xl p-4",children:[e.jsx("h1",{className:"text-white",children:"Ù¾Ø§Ú© Ú©Ø±Ø¯Ù† Ù…Ø®Ø§Ø·Ø¨"}),e.jsxs("p",{className:"text-white",children:["Ø¬Ø¯ÛŒ Ù…ÛŒØ®ÙˆØ§ÛŒ ",i," Ø±Ùˆ Ù¾Ø§Ú©Ø´ Ú©Ù†ÛŒØŸ"]}),e.jsx("button",{className:"mx-2 bg-green-500 text-white !rounded-2xl p-3",onClick:L,children:"Ù†Ù‡ Ø¨ÛŒ Ø®ÛŒØ§Ù„..."}),e.jsx("button",{className:"mx-2 bg-red-500 text-white !rounded-2xl p-3",onClick:async()=>{await Z(n),L(),O()},children:"Ø¢Ø±Ø±Ø±Ù‡ Ù¾Ø§Ú©Ø´ Ú©Ù†"})]})})},Z=async n=>{try{s(!0),await xe(n),t(i=>i.filter(L=>L.id!==n)),s(!1),k.error("Ù…Ø®Ø§Ø·Ø¨ Ø§Ø² Ù‡Ø³ØªÛŒ Ø³Ø±ÙˆØ± Ù†ÛŒØ³Øª Ú¯Ø´Øª")}catch(i){console.log(i),s(!1)}},S=async()=>{try{s(!0);const n=await ne(),i=await M();t(n),p(n),r(i),s(!1)}catch{s(!1)}};return h.useEffect(()=>{S()},[]),h.useEffect(()=>{S()},[j]),e.jsxs(e.Fragment,{children:[e.jsx(G,{rtl:!0,position:"top-left",autoClose:5e3,hideProgressBar:!0,newestOnTop:!1,closeOnClick:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0,theme:"dark"}),e.jsxs(g.Provider,{value:{loading:a,contacts:c,Contact:C,filteredContacts:u,groups:o,contactSearch:_,errors:l,changeFlag:j,confirmDelete:X,createContactForm:z,changed:O},children:[e.jsx(ue,{}),e.jsxs(Q,{children:[e.jsx(w,{path:"/",element:e.jsx(ee,{to:"/contacts"})}),e.jsx(w,{path:"/contacts",element:e.jsx(Ne,{})}),e.jsx(w,{path:"/addcontact",element:e.jsx(be,{})}),e.jsx(w,{path:"/editcontact/:contactid",element:e.jsx(we,{})}),e.jsx(w,{path:"/viewcontact/:contactid",element:e.jsx(ye,{})})]})]})]})};T.createRoot(document.getElementById("root")).render(e.jsx(h.StrictMode,{children:e.jsx(te,{basename:"/Contact-Manager-App",children:e.jsx(Ce,{})})}));
